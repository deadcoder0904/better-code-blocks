export const meta = {
	title: 'The Complete Guide to Building a Blog with Next.js & MDX',
	description: 'Build a production-ready, blazing fast, static blog using Next.js & MDX.',
	date: '2021-06-01T14:54:37.229Z',
	tags: ['javascript', 'next.js', 'mdx', 'blog'],
	author: 'Akshay Kadam (A2K)',
	published: true,
}

I created a full-fledged blog with [Next.js](https://nextjs.org) & [MDX](https://mdxjs.com) in one-day & I'm going to teach you how to do the same.

We will be building a blazing fast, static blog using Next.js & MDX. We will also cover generating Sitemap for your site so Google knows which sites to crawl. And finally, we will learn how to generate an RSS reader in Next.js using [Feed](https://github.com/jpmonette/feed) so people can get notified of your new posts.

Let's dive right in!

<!-- more -->

import NotFound from './404-not-found.png'

## What is Next.js?

Next.js is an open-source React framework used by [hundreds of production-ready sites](https://nextjs.org/showcase), created & maintained by the great team at [Vercel](https://vercel.com).

It comes with tons of features such as:

- Static Site Generation (SSG) &rarr; The HTML is generated at built time & will be reused on every request
- Server Side Rendering (SSR) &rarr; The HTML is generated on each request
- File-system Routing &rarr; Every component in the pages directory becomes a route
- Internationalization -> Built-in Domain & Subdomain Routing and Automatic Language detection
- TypeScript support -> Automatic TypeScript configuration & compilation
- Built-in CSS support -> Create component-level styles with CSS modules. Built-in Sass support.
- Code-Splitting & Smart Bundling -> Optimized bundle splitting algorithm created by the Google Chrome team.
- Route Pre-Fetching -> Prefetch pages for faster client-side transitions
- Dynamic Import -> Import JavaScript modules dynamically to reduce the number of requests
- Automatic Image Optimization -> `<Image>` component allows optimizing & resizing images before serving them to the user

It also gives the best developer experience by enabling Fast Refresh which is just a fancy of reloading a page as you develop the app so you don't have to keep refreshing your browser to see the current changes.

Next.js allows you to develop apps that run on the server or you can export them as plain HTML files. Next.js is SEO-friendly as it delivers content without having to wait for the browser to load JavaScript.

It also has a very simple learning curve compared to similar contemporaries.

## Next.js vs Create React App (CRA)

Both Next.js & [Create React App (CRA)](https://create-react-app.dev/) can be used to get started very quickly & both provide a wonderful developer experience. However, both of them have use cases where either of them shines better.

Next.js is often useful for a multi-page application whereas CRA shines when it comes to building Single Page Application (SPA).

Next.js comes built-in with SSR whereas it's complicated & more error-prone to make it work with CRA. This makes Next.js to be much better with SEO than CRA.

The following table shows where Next.js shines over CRA:

| Features                    | Next.js                                                                                                                     | Create React App (CRA)                                                                                                                                                                |
| --------------------------- | --------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Server Side Rendering (SSR) | Out of the box support for SSR                                                                                              | Doesn't support SSR out of the box. You have to do it manually which is very time-consuming & error-prone.                                                                            |
| Static Export               | Allows you to export static HTML files. You don't need JavaScript to run statically exported Next.js app as it's just HTML. | Doesn't support static export of HTML files. It throws an error "You need to enable JavaScript to run this app."                                                                      |
| Configuration               | Almost everything is [configurable](https://nextjs.org/docs/api-reference/next.config.js/introduction)                      | Needs a hack to configure. Either you need to eject from CRA or you need to use [react-app-rewired](https://www.npmjs.com/package/react-app-rewired) after which you are on your own. |
| Image Optimization          | Automatic Image Optimization support.                                                                                       | Doesn't support optimization of images automatically.                                                                                                                                 |
| Internationalization (i18n) | Built-in Domain & Subdomain Routing and Automatic Language detection.                                                       | Need to use a custom solution like [i18next](https://github.com/i18next/i18next). CRA [doesn't support](https://github.com/facebook/create-react-app/issues/1091) i18n automatically. |
| SEO                         | SSR apps have better SEO results.                                                                                           | Single Page Applications (SPA) don't have great SEO support as compared to SSR apps.                                                                                                  |

## Next.js vs Gatsby

Both Next.js & [Gatsby](https://www.gatsbyjs.com/) help with generating Server Side Rendered apps (SSR) but in 2 different ways. Gatsby's main use-case is of a static site generator, whereas Next.js supports dynamic apps as well as static apps without much hassle.

Gatsby also requires to use GraphQL which is an overkill for making a static website. Next.js doesn't require GraphQL to be used.

The following table shows a comparison of Next.js with Gatsby:

| Features               | Next.js                                                                                      | Gatsby                                                                                                                                                                                                                                             |
| ---------------------- | -------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Static & Dynamic Sites | Allows you to build static as well as dynamic sites easily                                   | Allows you to build static sites easily. Gatsby fetches data only during the build step. If the external source has new data, it won't show up until we run another build. This is the reason it's much harder to build dynamic sites with Gatsby. |
| Usage of GraphQL       | Doesn't require GraphQL to query local data & pages                                          | Requires GraphQL to query local data & pages. GraphQL has a steep learning curve & it feels like an overkill.                                                                                                                                      |
| Data Handling          | Doesn't tell you how to handle data in your app. You can use whatever you want.              | Tells you how to handle data in your app. It usually requires you to use GraphQL.                                                                                                                                                                  |
| Plugins                | Doesn't have built-in support for plugins. However, it has many community supported plugins. | It has a vast plugin ecosystem for various data sources like Contentful, Wordpress, Sanity, Netlify CMS and many more. This allows you to add functionality and customize your Gatsby site with 1000s of ready-made plugins.                       |

## Getting Started

The easiest way to set up a Next.js app is using [create-next-app](https://nextjs.org/docs/api-reference/create-next-app). This simple CLI tool allows us to quickly build a new Next.js application with everything set up for us. We can create a new Next.js app by using the default Next.js template or by using one of the official [Next.js examples](https://github.com/vercel/next.js/tree/canary/examples).

We will use the default Next.js template. To get started, enter the following command in the terminal:

```bash theme=purple
$ npx create-next-app
```

You will get the following prompt. Type `y` & enter project name `next-blog`.

```bash theme=purple
Need to install the following packages:
  create-next-app
Ok to proceed? (y) y
âœ” What is your project named? next-blog
```

Let's go into `next-blog` directory in the terminal & run the project:

```bash theme=purple
$ cd next-blog
$ npm run dev
```

Open a new terminal & create a top-level `src/` folder where we will keep our `components`, `pages` & `styles`. Move the `pages` & `styles` directory into the `src` folder:

```bash theme=purple
$ mkdir src/
$ mv pages/ styles/ src/
```

Now if you refresh the page, you'll see a 404 page.

<img src={NotFound} alt="404 not found" width="2880" height="1680" />

Make sure to close the terminal running `npm run dev` & restart it to see the website working again. Since, `src` directory is very common in many apps, Next.js [supports it by default](https://nextjs.org/docs/advanced-features/src-directory).

Make sure your `src/pages/index.js` file looks like:

```js theme=purple
import Head from 'next/head'

export default function Home() {
	return (
		<div>
			<Head>
				<title>Next Blog</title>
				<link rel="icon" href="/favicon.ico" />
			</Head>
			<h1>Home</h1>
		</div>
	)
}
```

Remove the `import` from `_app.js` so it looks like:

```js theme=purple
function MyApp({ Component, pageProps }) {
	return <Component {...pageProps} />
}

export default MyApp
```

Go ahead and remove `src/pages/api/` folder & everything from the `styles/` folder.

```bash theme=purple line=1
$ rm -rf src/pages/api/
$ rm src/styles/globals.css src/styles/Home.module.css
```
